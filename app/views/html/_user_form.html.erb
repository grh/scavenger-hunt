<%= form_for @user, url: (current_page?(signup_form_path) or current_page?(new_user_form_path)) ? create_user_path : update_user_path, method: :post do |f| %>
    <div class="form-group">
      <%= f.label :first_name, 'First Name' %>
      <%= f.text_field :first_name, class: 'form-control', required: 'true' %>
    </div>
    <div class="form-group">
      <%= f.label :last_name, 'Last Name' %>
      <%= f.text_field :last_name, class: 'form-control', required: 'true' %>
    </div>
    <div class="form-group">
      <%= f.label :email, 'Email' %>
      <%= f.email_field :email, class: 'form-control', required: 'true' %>
    </div>
    <div class="form-group">
      <%= f.label :password, 'Password' %>
      <%= f.password_field :password, class: 'form-control', required: 'true' %>
    </div>
    <div class="form-group">
      <%= f.label :password_confirmation, 'Confirm Password' %>
      <%= f.password_field :password_confirmation, class: 'form-control', required: 'true' %>
    </div>
    <% if @current_user.admin? %>
        <div class="form-group">
          <%= f.label :roles %>
          <%= f.collection_check_boxes :role_ids, Role.all, :id, :name, { class: 'form-control' } do |r| %>
              <div class="row">
                <div class="col-md-6">
                  <%= r.check_box %>
                  <%= r.label %>
                </div>
              </div>
          <% end %>
        </div>
    <% end %>
    <%= f.submit 'Submit', class: 'btn btn-default' %>
<% end %>